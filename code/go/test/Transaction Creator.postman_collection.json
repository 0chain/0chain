{
	"info": {
		"_postman_id": "46adf0d2-632c-4879-876d-1920e0bb4c57",
		"name": "Transaction Creator",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "http://localhost:7070/v1/transaction/put",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "4528f90e-63d6-4f82-98ae-cbc36e5eaa53",
						"type": "text/javascript",
						"exec": [
							"var timestamp = Math.floor(new Date().getTime()/1000);",
							"postman.setEnvironmentVariable('timestamp',timestamp);",
							"",
							"var amount = Math.random()*Math.pow(10,18)",
							"postman.setEnvironmentVariable('amount',amount);",
							"",
							"var data = `Pay ${amount} ZCHN.decimal units to me`;",
							"var private_key = \"6bf558761ce5e475acdc4a24f807b578edfd91f20928e0f9963ff4dd52546f43eaa9d6bce2264afa51ac5eaaa258dcc59350b3e60bd2ffe111447b06e01eb67a\";",
							"var public_key = \"eaa9d6bce2264afa51ac5eaaa258dcc59350b3e60bd2ffe111447b06e01eb67a\";",
							"",
							"var url = \"http://localhost:7070/_sign?private_key=\"+private_key+\"&public_key=\"+public_key+\"&timestamp=\"+timestamp+\"&data=\"+encodeURIComponent(amount+\":\"+data);",
							"",
							"pm.sendRequest(url, ",
							"function (err, res) {",
							"var json = res.json()",
							" postman.setEnvironmentVariable('client_id',json.client_id)",
							" postman.setEnvironmentVariable('hash',json.hash)",
							" postman.setEnvironmentVariable('signature',json.signature)",
							" postman.setEnvironmentVariable('data',data)",
							"})"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"hash\": \"{{hash}}\",\n\t\"client_id\": \"{{client_id}}\",\n\t\"transaction_data\": \"{{data}}\",\n\t\"signature\": \"{{signature}}\",\n\t\"creation_date\": {{timestamp}},\n\t\"chain_id\" : \"0afc093ffb509f059c55478bc1a60351cef7b4e9c008a53a6cc8241ca8617dfe\",\n\t\"transaction_value\": {{amount}}\n}"
				},
				"url": {
					"raw": "http://localhost:7070/v1/transaction/put",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "7070",
					"path": [
						"v1",
						"transaction",
						"put"
					]
				}
			},
			"response": []
		}
	]
}