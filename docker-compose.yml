version: '3'
services:
  redis:
    image: "redis:alpine"
    container_name: "redis"
    volumes:
      - ./config:/0chain/config
      - ./data:/0chain/data
    command: redis-server /0chain/config/redis/state.redis.conf

  redis_txns:
    image: "redis:alpine"
    container_name: "redis_txns"
    volumes:
      - ./config:/0chain/config
      - ./data:/0chain/data
    command: redis-server /0chain/config/redis/transactions.redis.conf

  app:
    depends_on:
     - redis
     - redis_txns
    links:
      - redis:redis
      - redis_txns:redis
    build: .
    ports:
      - "7070:7070"
    volumes:
      - ./config:/0chain/config

volumes:
  data:
  config:
