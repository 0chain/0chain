# magic-block

## common usage
This repo is used to build magicblock and dkg files for 0chain.

### Requirement
Install [docker](https://docs.docker.com/engine/install/ubuntu/)
Install [docker compose](https://docs.docker.com/compose/install/)

### Step 1.
Copy the `zip` file generated by keygen repository to 0chain [repository](https://github.com/0chain/0chain/tree/staging/docker.local/config/magicBlock/input/) by using following command -

```
cp /root/keygen/outputs/config/hightps@devnet.net.zip /root/0chain/docker.local/config/magicBlock/input/
```

write your `email` and `password` in `password.yaml` whose location is `/root/0chain/docker.local/config/magicBlock/input/password.yaml`

```
https://github.com/0chain/0chain/blob/staging/docker.local/config/magicBlock/input/password.yaml
```

### Step 2.
create `build.base` image -

```
sudo docker build -f docker.local/build.base/Dockerfile.run_base   docker.local/build.base -t zchain_run_base
```

Run the command to build the image locally -

```
docker build -f docker.local/build.magicBlock/Dockerfile . -t magic-block
```

### Step 3. 

Run the container using docker-compose command -

```
cd 0chain/docker.local/build.magicBlock/
```

```
docker-compose up
```

The container will exit once the magic-block is generated. You will find the magicBlock and dkg files in `/root/docker.local/config/magicBlock/output/hightps@devnet.net.zip` zip file [DevOps Team will share this zip file with miners ]. 

further Zminer setup will be done by Zminer repo [main branch] so copy magic-block output zip file to Zminer

```bash
cp docker.local/config/magicBlock/output/hightps@devnet.net.zip /root/Zminer/keygen/
```