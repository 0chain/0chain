###
### Blockchain miners Byzantine tests
###

---
# enabled test cases sets
enable:
  - "VRF"

# sets of test cases
sets:
  - name: "VRF"
    tests:
      - "Spam VRFS to everyone"

#
# test cases
#	Flow of this test case:
# 1. All nodes communicate honestly until round 10th
# 2. Lock notarization of round 10 in all nodes (block verification tickets sending)
# 3. Adversarial node sends VRF for round 11
# 4. All nodes receive adversarial node VRF for round 11, cache it and unblock verification tickets sending for round 10
# 5. Verify whether network continues operating correctly
tests:
  # VRF
  - name: "Spam VRFS to everyone"
    flow:
      - set_monitor: "sharder-1"
      - cleanup_bc: {}
      - start: ["sharder-1"]
      - start: ["miner-1", "miner-2", "miner-3", "miner-4"]
      - lock_notarization_and_send_next_round_vrf:
          adversarial: bfa64c67f49bceec8be618b1b6f558bdbaf9c100fd95d55601fa2190a4e548d8
          round: 10
      - wait_round:
          shift: 10
          allow_beyond: true
          timeout: "30s"
