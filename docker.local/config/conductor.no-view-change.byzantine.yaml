enable:
  - "attack round transfer"
sets:
  - name: "attack round transfer"
    tests:
      - "not notarised block extension"
      - "send different blocks from first generator"
      - "send different blocks from all generators"
      - "breaking single block"
      - "send insufficient proposals"

tests:
  - name: "not notarised block extension"
    flow:
      - set_monitor: "miner-1"
      - cleanup_bc: { }
      - start: [ "miner-1", "miner-2", "miner-3", "miner-4", "sharder-1", "sharder-2" ]
      - configure_not_notarised_block_extension_test_case:
          enable: true
          round: 30
      - make_test_case_check:
          wait_time: 5m

  - name: "send different blocks from first generator"
    flow:
      - cleanup_bc: { }
      - start: [ "miner-1", "miner-2", "miner-3", "miner-4", "sharder-1", "sharder-2" ]
      - configure_send_different_blocks_from_first_generator_test_case:
          round: 30
      - make_test_case_check:
          wait_time: 5m

  - name: "send different blocks from all generators"
    flow:
      - cleanup_bc: { }
      - start: [ "miner-1", "miner-2", "miner-3", "miner-4", "sharder-1", "sharder-2" ]
      - configure_send_different_blocks_from_all_generators_test_case:
          round: 30
      - make_test_case_check:
          wait_time: 5m

  - name: "breaking single block"
    flow:
      - cleanup_bc: { }
      - start: [ "miner-1", "miner-2", "miner-3", "miner-4", "sharder-1", "sharder-2" ]
      - configure_breaking_single_block:
          round: 30
      - make_test_case_check:
          wait_time: 5m

  - name: "send insufficient proposals"
    flow:
      - cleanup_bc: { }
      - env:
          CONFIG_SUBPATH: "/test.generators_failure"
          CLI_ARGS: "--magic_block_file config/test.generators_failure/b0magicBlock_7_miners_1_sharder.json"
          DKG_AFFIX: "7_miners_1_sharder_"
      - start: [ "miner-1", "miner-2", "miner-3", "miner-4", "miner-5", "miner-6",  "miner-7", "sharder-1"]
      - configure_send_insufficient_proposals_test_case:
          round: 30
      - make_test_case_check:
          wait_time: 5m