---
- name: Remove Key Pair
  ec2_key:
    region: "{{ aws_region }}"
    name: "{{key_pair}}"
    state: absent
  tags:
    - keys-remove

- name: Crete Key Pair
  ec2_key:
    name: "{{key_pair}}"
    region: "{{aws_region}}"
  register: keypair
  tags:
    - keys-create

- name: Write key to a file
  copy:
    dest: "{{key_pair_file}}"
    content: "{{ keypair.key.private_key }}"
    mode: 0600
  when: keypair.changed
  tags:
    - keys-create

- name: Dump Key Pair
  debug: var=keypair
  tags:
    - keys-create
...