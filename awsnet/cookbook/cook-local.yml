---
- hosts: localhost

  vars_files:
    - "{{ credential }}/aws/credentials.yml"
    - [ "anchor/{{network}}/layout.yml", anchor/testnet/layout.yml ]
    - [ "anchor/{{network}}/clientid.yml", anchor/testnet/clientid.yml ]

  vars:
    agents: "{{zchain.blueprint.sharders| dict2items | union(zchain.blueprint.miners | dict2items)}}"

  environment: "{{aws_vars}}"

  roles:
    - role: artifacts

    - role: keyaws
    - role: keygit

    - role: instance
    - role: clientid
    - role: gitrepo
    - role: agentbuild
    - role: agentrole
...