---
- hosts: [tag_role_miner, tag_role_sharder]
  become: false
  gather_facts: yes
  vars_files:
    - "{{ credential }}/aws/credentials.yml"
    - [ "anchor/{{network}}/layout.yml", anchor/testnet/layout.yml ]
    - [ "anchor/{{network}}/clientid.yml", anchor/testnet/clientid.yml ]

  vars:
    agents: "{{zchain.blueprint.sharders| dict2items | union(zchain.blueprint.miners | dict2items)}}"

  environment: "{{aws_vars}}"

  roles:
    - role: artifacts
    - role: inventory
    - role: keyadmin
    - role: instances
    - role: clientid
    - role: gitrepo
    - role: zagents
...