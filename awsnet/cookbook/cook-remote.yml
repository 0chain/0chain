---
#- hosts: ["{{blueprint.hosts}}"]
#  gather_facts: false
#  vars_files:
#  - "{{ credential }}/aws/credentials.yml"
#  - "anchor/{{network}}/blueprint.yml"
#  - "anchor/{{network}}/clientid.yml"
#  - "roles/artifacts/vars/main.yml"
#
#  tasks:
#  - name: "Include artifacts for the network"
#    import_role:
#      name: artifacts
#      tasks_from: artifacts-common
#
#  - name: "Include tasks to setup minimal raw packages"
#    import_role:
#      name: instance
#      tasks_from: instance-assemble-raw

- hosts: ["{{blueprint.hosts}}"]
  gather_facts: true
  vars_files:
    - "{{ credential }}/aws/credentials.yml"
    - "anchor/{{network}}/blueprint.yml"
    - "anchor/{{network}}/clientid.yml"
    - "roles/artifacts/vars/main.yml"

  environment: "{{aws_vars}}"

  tasks:
  - name: "Include artifacts for the network"
    import_role:
      name: artifacts
      tasks_from: artifacts-common

  - name: "Include metadata for all the instances"
    import_role:
      name: instance
      tasks_from: instance-metadata

  - name: "Include tasks to setup the remote instances"
    import_role:
      name: instance

  - name: "Docker Setup"
    import_role:
      name: docker

  - name: "Agent Setup"
    import_role:
      name: agent-clientid

  - name: "0chain configuration update..."
    import_role:
      name: agent-config

  - name: "0chain git replication..."
    import_role:
      name: gitrepo

  - name: "Build 0chain code base..."
    import_role:
      name: agent-build

  - name: "Start/Stop the agents..."
    import_role:
        name: agent-role
...