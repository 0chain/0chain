---
- block:
  - name: "Creating 0chain zip file...{{zchain.git.version}}"
    git:
      repo: "{{zchain.git.repo}}"
      dest: "{{zchain.git.staging}}"
      archive: "{{zchain.git.zip}}"
      version: "{{zchain.git.version}}"
      force: yes
    register: result

  - debug:
      msg: "GIT branch={{zchain.git.version}} before={{result.before}} after={{result.after}}"
  tags: ['gitrepo-assemble-local']

- block:
  - debug:
      msg: "Replicate {{zchain.git.version}} from {{zchain.git.zip}} to {{artifact.zchain.base}}/0chain"

  - name: "Extracting {{zchain.git.zip}} to the remote machines..."
    become: yes
    unarchive:
      src: "{{zchain.git.zip}}"
      dest: "{{artifact.zchain.base}}/0chain"
      remote_src: no
      group: 0chain
      owner: 0chain
      force: yes
      creates:
      list_files: no
    register: result
  tags: ['gitrepo-assemble-remote']

- block:
  - name: "Delete the git repository.."
    file:
      dest: "{{artifact.zchain.base}}/0chain"
      state: absent

  - debug:
      msg: "Extract {{zchain.git.zip}} result failed={{result.failed}}"
  tags: ['gitrepo-teardown-remote']
...